const n=window.localStorage.getItem("map");const s=new Map;const a={0:'Spectators',1:'Red',2:'Blue'};const t=0;const e={token:'thr1.AAAAAGP03jVfpnH_LNrErw.FVzApZtUAbw',noPlayer:true,maxPlayers:13,roomName:'🤜🏿 Wrangle 𝐒𝐏𝐀𝐂𝐄𝐁𝐎𝐔𝐍𝐂𝐄 v1.0',"public":true,password:'12345',geo:{code:'eg',lat:40,lon:-3}};const o={'default':['[[playerName]] has scored a goal for the [[team]] team'],og:['an own goal from [[playerName]] for the [[team]] team']};const i={touch:{name:null,id:null,team:null},assist:{name:null,id:null,team:null},setTouch:function(t){this.touch.name=t.name;this.touch.team=t.team;this.touch.id=t.id},setAssist:function(t){this.assist.name=t.name;this.assist.id=t.id;this.assist.team=t.team},dispose:function(){this.touch.name=this.touch.id=this.touch.team=this.assist.name=this.assist.id=null}};const u=HBInit(e);u.setTeamsLock(true);u.setCustomStadium(n);u.onStadiumChange=function(t,e){if(e!=null){u.setCustomStadium(n)}};u.onPlayerJoin=function(t){updateAdmins()};u.onPlayerLeave=function(t){updateAdmins()};u.onGameTick=function(){const e=u.getPlayerList().filter(t=>t.team!=0);const n=u.getDiscProperties(t);for(let t=0;t<e.length;t++){const s=u.getPlayerDiscProperties(e[t].id);if(distance(s,n)<=s.radius+n.radius+2){updateBallProperties(e[t])}}};u.onPlayerBallKick=function(t){updateBallProperties(t)};u.onPositionsReset=function(){i.dispose()};u.onGameStop=function(t){i.dispose()};u.onTeamVictory=function(t){setTimeout(()=>{u.stopGame()},600)};u.onTeamGoal=function(t){const e=isOwnGoal(t);const n=e?'🟣':t==1?'🔴':'🔵';const s=u.getScores();u.sendAnnouncement(n+' '+(e?o['og']:o['default']).random().replace('[[team]]',a[t]).replace('[[playerName]]',i.touch.name)+(e?'':i.assist.id?' with '+i.assist.name+'\'s assist':'')+' ['+s.red+' - '+s.blue+']'+' '+n,null,e?9531647:t==1?16727614:2201331)};function distance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function updateBallProperties(t){if(t.id!=i.touch.id){if(t.team==i.touch.team){i.setAssist(i.touch)}else{i.setAssist({id:null,name:null,team:null})}i.setTouch(t)}}function isOwnGoal(t){return i.touch.team!=t}function snapshot(e){const t=u.getPlayerList();const n=t.filter(t=>t.team==e).map(t=>t.id);s.set(e,n)}function updateAdmins(){var t=u.getPlayerList();if(t.length==0)return;if(t.find(t=>t.admin)!=null)return;u.setPlayerAdmin(t[0].id,true)}Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};
