const a={roomName:"beta",noPlayer:true,maxPlayers:14,"public":true,token:"thr1.AAAAAGPezKOv2y-A8ebm5A.5wVnNbk1OHo"};const e=`{"name":"Spacebounce Official Map","width":900,"height":550,"bg":{"type":"hockey","width":550,"height":240,"cornerRadius":0,"kickOffRadius":0},"vertexes":[{"x":-550,"y":240,"cMask":["ball"]},{"x":-550,"y":80,"cMask":["ball"]},{"x":-550,"y":-80,"cMask":["ball"]},{"x":-550,"y":-240,"cMask":["ball"]},{"x":550,"y":240,"cMask":["ball"]},{"x":550,"y":80,"cMask":["ball"]},{"x":550,"y":-80,"cMask":["ball"]},{"x":550,"y":-240,"cMask":["ball"]},{"x":-1,"y":550,"bCoef":0.1,"cMask":["red","blue"],"cGroup":["redKO","blueKO"]},{"x":-1,"y":80,"bCoef":0.1,"cMask":["red","blue"],"cGroup":["redKO","blueKO"]},{"x":-1,"y":-80,"bCoef":0.1,"cMask":["red","blue"],"cGroup":["redKO","blueKO"]},{"x":-1,"y":-550,"bCoef":0.1,"cMask":["red","blue"],"cGroup":["redKO","blueKO"]},{"x":-1,"y":240,"cMask":[]},{"x":-1,"y":-240,"cMask":[]},{"x":-1,"y":80,"bCoef":0.1,"cMask":["red","blue"],"cGroup":["redKO","blueKO"]},{"x":-1,"y":-80,"bCoef":0.1,"cMask":["red","blue"],"cGroup":["redKO","blueKO"]},{"x":-547,"y":-80,"cMask":[]},{"x":-547,"y":-238,"cMask":[]},{"x":1.5,"y":-238,"cMask":[]},{"x":547,"y":-238,"cMask":[]},{"x":547,"y":-80,"cMask":[]},{"x":547,"y":80,"cMask":[]},{"x":547,"y":238,"cMask":[]},{"x":1.5,"y":238,"cMask":[]},{"x":-547,"y":238,"cMask":[]},{"x":-547,"y":80,"cMask":[]},{"x":1.5,"y":-78,"cMask":[]},{"x":1.5,"y":82,"cMask":[]}],"segments":[{"v0":16,"v1":17,"cMask":[],"color":"555555"},{"v0":17,"v1":18,"cMask":[],"color":"555555"},{"v0":18,"v1":19,"cMask":[],"color":"555555"},{"v0":19,"v1":20,"cMask":[],"color":"555555"},{"v0":20,"v1":21,"vis":false,"cMask":[],"color":"555555"},{"v0":21,"v1":22,"cMask":[],"color":"555555"},{"v0":22,"v1":23,"cMask":[],"color":"555555"},{"v0":23,"v1":24,"cMask":[],"color":"555555"},{"v0":24,"v1":25,"cMask":[],"color":"555555"},{"v0":25,"v1":16,"vis":false,"cMask":[],"color":"555555"},{"v0":18,"v1":26,"cMask":[],"color":"555555"},{"v0":26,"v1":27,"curve":179,"curveF":0.008726867790758751,"cMask":[],"color":"555555"},{"v0":27,"v1":26,"curve":-179,"curveF":-0.00872686779075885,"cMask":[],"color":"555555"},{"v0":27,"v1":23,"cMask":[],"color":"555555"},{"v0":26,"v1":27,"cMask":[],"color":"6C6C6C"},{"v0":15,"v1":14,"cMask":[],"color":"6C6C6C"},{"v0":13,"v1":15,"cMask":[],"color":"DCDCFF"},{"v0":14,"v1":12,"cMask":[],"color":"DCDCFF"},{"v0":1,"v1":2,"cMask":[],"color":"D0D0E8"},{"v0":5,"v1":6,"cMask":[],"color":"D0D0E8"},{"v0":8,"v1":9,"bCoef":0.1,"vis":false,"cMask":["red","blue"],"cGroup":["redKO","blueKO"],"color":"E0E0F8"},{"v0":9,"v1":10,"bCoef":0.1,"curve":180,"curveF":6.123233995736766e-17,"cMask":["red","blue"],"cGroup":["blueKO"],"color":"D0D0E8"},{"v0":10,"v1":9,"bCoef":0.1,"curve":180,"curveF":6.123233995736766e-17,"cMask":["red","blue"],"cGroup":["redKO"],"color":"D0D0E8"},{"v0":14,"v1":15,"bCoef":0.1,"curve":180,"curveF":6.123233995736766e-17,"cMask":["red","blue"],"cGroup":["blueKO"],"color":"D0D0E8"},{"v0":10,"v1":11,"bCoef":0.1,"vis":false,"cMask":["red","blue"],"cGroup":["redKO","blueKO"],"color":"E0E0F8"},{"v0":0,"v1":1,"bias":-100,"cMask":["ball"],"color":"D0D0E8"},{"v0":2,"v1":3,"bias":-100,"cMask":["ball"],"color":"D0D0E8"},{"v0":4,"v1":5,"bias":100,"cMask":["ball"],"color":"D0D0E8"},{"v0":6,"v1":7,"bias":100,"cMask":["ball"],"color":"D0D0E8"},{"v0":0,"v1":4,"bias":100,"cMask":["ball"],"color":"D0D0E8"},{"v0":3,"v1":7,"bias":-100,"cMask":["ball"],"color":"D0D0E8"},{"v0":1,"v1":2,"bias":-100,"bCoef":0,"curve":180,"curveF":6.123233995736766e-17,"vis":false,"cMask":["ball"],"color":"D0D0E8"},{"v0":6,"v1":5,"bias":-100,"bCoef":0,"curve":180,"curveF":6.123233995736766e-17,"vis":false,"cMask":["ball"],"color":"D0D0E8"}],"planes":[{"normal":[0,1],"dist":-550,"bCoef":0.1,"_data":{"extremes":{"normal":[0,1],"dist":-550,"canvas_rect":[-900,-550,900,550],"a":[-900,-550],"b":[900,-550]}}},{"normal":[0,-1],"dist":-550,"bCoef":0.1,"_data":{"extremes":{"normal":[0,-1],"dist":-550,"canvas_rect":[-900,-550,900,550],"a":[-900,550],"b":[900,550]}}},{"normal":[1,0],"dist":-900,"bCoef":0.1,"_data":{"extremes":{"normal":[1,0],"dist":-900,"canvas_rect":[-900,-550,900,550],"a":[-900,-550],"b":[-900,550]}}},{"normal":[-1,0],"dist":-900,"bCoef":0.1,"_data":{"extremes":{"normal":[-1,0],"dist":-900,"canvas_rect":[-900,-550,900,550],"a":[900,-550],"b":[900,550]}}},{"normal":[0,1],"dist":-247,"cMask":["ball"],"_data":{"extremes":{"normal":[0,1],"dist":-247,"canvas_rect":[-900,-550,900,550],"a":[-900,-247],"b":[900,-247]}}},{"normal":[0,-1],"dist":-247,"cMask":["ball"],"_data":{"extremes":{"normal":[0,-1],"dist":-247,"canvas_rect":[-900,-550,900,550],"a":[-900,247],"b":[900,247]}}}],"goals":[{"p0":[-550,80],"p1":[-550,-80],"team":"red"},{"p0":[550,80],"p1":[550,-80],"team":"blue"}],"discs":[{"cGroup":["ball","kick","score"],"pos":[0,0]},{"pos":[-550,80],"radius":8,"invMass":0,"color":"961515"},{"pos":[-550,-80],"radius":8,"invMass":0,"color":"961515"},{"pos":[550,80],"radius":8,"invMass":0,"color":"1E1666"},{"pos":[550,-80],"radius":8,"invMass":0,"color":"1E1666"},{"pos":[-560,78],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-570,76],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,74],"radius":0.01,"invMass":0,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,61],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,48],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,36],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,24],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,12],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,0],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,-12],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,-24],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,-36],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,-48],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,-61],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-580,-74],"radius":0.01,"invMass":0,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-570,-76],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[-560,-77],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[564,78],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[573,76],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,74],"radius":0.01,"invMass":0,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,61],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,48],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,36],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,24],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,12],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,0],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,-12],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,-24],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,-36],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,-48],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,-61],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[580,-74],"radius":0.01,"invMass":0,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[570,-76],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]},{"pos":[560,-78],"radius":0.01,"invMass":1.5,"damping":0.96,"color":"0","cMask":["ball"]}],"playerPhysics":{"bCoef":1.5,"damping":0.9995,"acceleration":0.025,"kickingAcceleration":0.0175,"kickingDamping":0.9995},"ballPhysics":"disc0","spawnDistance":350,"joints":[{"d0":1,"d1":5,"length":10.198039027185569},{"d0":5,"d1":6,"length":10.198039027185569,"_data":{"mirror":{}}},{"d0":6,"d1":7,"length":10.198039027185569},{"d0":7,"d1":8,"length":13},{"d0":8,"d1":9,"length":13},{"d0":9,"d1":10,"length":12},{"d0":10,"d1":11,"length":12},{"d0":11,"d1":12,"length":12},{"d0":12,"d1":13,"length":12},{"d0":13,"d1":14,"length":12},{"d0":14,"d1":15,"length":12},{"d0":15,"d1":16,"length":12},{"d0":16,"d1":17,"length":12},{"d0":17,"d1":18,"length":13},{"d0":18,"d1":19,"length":13},{"d0":19,"d1":20,"length":10.198039027185569},{"d0":20,"d1":21,"length":10.04987562112089},{"d0":21,"d1":2,"length":10.44030650891055},{"d0":3,"d1":22,"length":14.142135623730951},{"d0":22,"d1":23,"length":9.219544457292887},{"d0":23,"d1":24,"length":7.280109889280518},{"d0":24,"d1":25,"length":13},{"d0":25,"d1":26,"length":13},{"d0":26,"d1":27,"length":12},{"d0":27,"d1":28,"length":12},{"d0":28,"d1":29,"length":12},{"d0":29,"d1":30,"length":12},{"d0":30,"d1":31,"length":12},{"d0":31,"d1":32,"length":12},{"d0":32,"d1":33,"length":12},{"d0":33,"d1":34,"length":12},{"d0":34,"d1":35,"length":13},{"d0":35,"d1":36,"length":13},{"d0":36,"d1":37,"length":10.198039027185569},{"d0":37,"d1":38,"length":10.198039027185569},{"d0":38,"d1":4,"length":10.198039027185569}],"redSpawnPoints":[[-350,0],[-350,60],[-350,-60],[-350,120],[-350,-120],[-850,0]],"blueSpawnPoints":[[350,0],[350,60],[350,-60],[350,120],[350,-120],[850,0]],"kickOffReset":"full","traits":{},"canBeStored":false}`;const o={"public":[{id:"VmeQnBhJyv",name:"help",syntax:"help|commands",display:false,admin:false},{id:"abfGQpJReQ",name:"bb",syntax:"bb|leave|ggs",display:false,admin:false},{id:"zeGnUOMbAI",name:"bans",syntax:"bans",display:false,admin:false},{id:"USodMnnjLS",name:"unban",syntax:"unban #\\d+",display:false,admin:true},{id:"DTpJdWHMtp",name:"clearbans",syntax:"clearbans|cbans",display:false,admin:true},{id:"UFBzYZTdgb",name:"pm",syntax:"pm #\\d+ .+",display:false,admin:false}]};const s={};const t=[];const c="!";const l={1:{last:{name:undefined,id:undefined},assist:{name:undefined,id:undefined}},2:{last:{name:undefined,id:undefined},assist:{name:undefined,id:undefined}}};const i={team:undefined,name:undefined,id:undefined};const r=HBInit(a);r.onStadiumChange=function(a){if(a!="Spacebounce Official Map"){r.setCustomStadium(e)}};r.setTeamsLock(true);r.setCustomStadium(e);function updateAdmins(){
// Get all players
var a=r.getPlayerList();if(a.length==0)return;// No players left, do nothing.
if(a.find(a=>a.admin)!=null)return;// There's an admin left so do nothing.
r.setPlayerAdmin(a[0].id,true);// Give admin to the first non admin player in the list
}r.onPlayerBallKick=function(a){i.name=a.name;i.team=a.team;i.id=a.id;if(!(l[a.team].last.id==a.id)){l[a.team].assist.name=l[a.team].last.name;l[a.team].assist.id=l[a.team].last.id}l[a.team].last.name=a.name;l[a.team].last.id=a.id;l[a.team==1?2:1].assist.name=undefined;l[a.team==1?2:1].assist.id=undefined;l[a.team==1?2:1].last.name=undefined;l[a.team==1?2:1].last.id=undefined};r.onPositionsReset=function(){l[1].last.name=undefined;l[1].last.id=undefined;l[1].assist.name=undefined;l[1].assist.id=undefined;l[2].last.name=undefined;l[2].last.id=undefined;l[2].assist.name=undefined;l[2].assist.id=undefined;i.name=undefined;i.team=undefined;i.id=undefined};r.onTeamGoal=function(a){var e=r.getScores();if(a!=i.team){r.sendAnnouncement('⚽ Own goal! - '+""+i.name+" for "+(a==1?'RED':'BLUE')+" team"+` 🕔 `+floor(e.time),null,14315734)}else{if(l[a].assist.id===l[a].last.id||l[a].assist.id===undefined){r.sendAnnouncement(`⚽ Goal! - ${l[a].last.name} scored for his ${a==1?'RED':'BLUE'} team 🕔 ${floor(e.time)}`,null,14315734)}else{r.sendAnnouncement(`⚽ Goal! - ${l[a].last.name} scored for his ${a==1?'RED':'BLUE'} team 🕔 ${floor(e.time)}, 👟 Assist ${l[a].assist.name}`,null,14315734)}}};r.onGameStart=function(){l[1].last.name=undefined;l[1].last.id=undefined;l[1].assist.name=undefined;l[1].assist.id=undefined;l[2].last.name=undefined;l[2].last.id=undefined;l[2].assist.name=undefined;l[2].assist.id=undefined;i.name=undefined;i.team=undefined;i.id=undefined};r.onRoomLink=function(a){console.log(a)};r.onPlayerJoin=function(a){check({id:a.id,auth:a.auth});r.sendAnnouncement(`Welcome ${a.name}, Check !help to view public commands`,a.id,16747520);updateAdmins();
// room.sendAnnouncement("In this demo room, banlist is emptied every 10 minutes, players who abuse permissions will be blacklisted 📌\nbecause there are no moderators in the room at the moment, so be careful!", player.id, 0x808080, "small");
};r.onPlayerLeave=function(a){delete s[a.id];updateAdmins()};r.onPlayerAdminChange=function(a,e){updateAdmins()};r.onPlayerChat=function(a,e){e=e.trim();if(e.startsWith(c)){return execute(a,e)}};r.onPlayerKicked=function(a,e,s){if(s){t.push({name:a.name,id:a.id})}};r.onGameTick=function(){const e=r.getPlayerList().filter(a=>a.team!=0);const s=r.getDiscProperties(0);if(!e.length)return;for(let a=0;a<e.length;a++){const n=r.getPlayerDiscProperties(e[a].id);if(Math.round(distance({x:n.x,y:n.y},{x:s.x,y:s.y}))<s.radius+n.radius+2){i.name=e[a].name;i.team=e[a].team;i.id=e[a].id;if(!(l[e[a].team].last.id==e[a].id)){l[e[a].team].assist.name=l[e[a].team].last.name;l[e[a].team].assist.id=l[e[a].team].last.id}l[e[a].team==1?2:1].assist.name=undefined;l[e[a].team==1?2:1].assist.id=undefined;l[e[a].team==1?2:1].last.name=undefined;l[e[a].team==1?2:1].last.id=undefined;l[e[a].team].last.name=e[a].name;l[e[a].team].last.id=e[a].id}}};r.onRoomLink=function(a){console.log(a)};function distance(a,e){return Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2))}function floor(a){if(Math.floor(a/60)<10||Math.floor(a%60)<10){if(Math.floor(a/60)<10&&Math.floor(a%60)>=10){return`0${Math.floor(a/60)}:${Math.floor(a%60)}`}else if(Math.floor(a/60)>=10&&Math.floor(a%60)<10){return`${Math.floor(a/60)}:0${Math.floor(a%60)}`}else{return`0${Math.floor(a/60)}:0${Math.floor(a%60)}`}}else{return`${Math.floor(a/60)}:${Math.floor(a%60)}`}}function execute(n,a){const e=new Intl.ListFormat("en",{style:"short",type:"conjunction"});const s=getCommand(a);if(!s)return false;if(s.admin&&!n.admin){r.sendAnnouncement("You are not an admin",n.id,16716032,null,2);return false}switch(s.id){case"VmeQnBhJyv":r.sendAnnouncement("Commands: "+e.format(o["public"].map(a=>c+a.name)),n.id,16752762);break;case"abfGQpJReQ":r.kickPlayer(n.id,a);break;case"DTpJdWHMtp":if(t.length>=1){r.clearBans();r.sendAnnouncement("Banlist has been cleared by "+n.name+" ("+t.length+")",null,14524637);t.length=0}break;case"UFBzYZTdgb":const l=r.getPlayer(a.match(/[0-9]+/)[0]);const i=a.split(new RegExp(c+s.name+" #\\d+ ")).reduce((a,e)=>a+e).trim();if(!l||l.id==n.id)return false;r.sendAnnouncement("To "+l.name+": "+i,n.id,16711935,null,1);r.sendAnnouncement("From "+n.name+": "+i,l.id,16711935,null,2);break;case"zeGnUOMbAI":if(t.length>=1){r.sendAnnouncement("Bans: "+e.format(t.map(a=>a.name+`#${a.id}`)),n.id,9408399)}break;case"USodMnnjLS":const d=a.match(/\d+/)?.[0];if(d){t.forEach((a,e,s)=>{if(a.id==d){r.clearBan(d);r.sendAnnouncement(`${n.name} unbanned ${a.name}`,null,65280);s.splice(e,1)}})}break}return s.display}function getCommand(e){e=e.slice(1);return o["public"].find(a=>e.match(new RegExp(a.syntax,"i"))?.[0]==e)}function check(a){const{[a.auth]:e}=s.swap();if(e!=null){r.kickPlayer(a.id,"Someone currently has the same authentication, Try again");return}s[a.id]=a.auth}setInterval(()=>{r.clearBans();t.length=0},6e4*10);Object.defineProperty(s,'swap',{value:function(){var e={};for(let a in this){e[this[a]]=a}return e}});
